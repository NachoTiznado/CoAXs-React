<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../../">
  <title data-ice="title">src/components/Bottom/ServiceEditor/ServiceEditor.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/mitTransportAnalyst/CoAXs-React" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ModifyDwells">ModifyDwells</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-modifyHeadway">modifyHeadway</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-modifySpeed">modifySpeed</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Accessibility">Accessibility</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CorridorInfo">CorridorInfo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DwellTime">DwellTime</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DwellTimeMax">DwellTimeMax</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DwellTimeMin">DwellTimeMin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Headway">Headway</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-HeadwayMax">HeadwayMax</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-HeadwayMin">HeadwayMin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-IntroDescription">IntroDescription</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-IntroTitle">IntroTitle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MapLat">MapLat</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MapLng">MapLng</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-PointToPoint">PointToPoint</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RunningTime">RunningTime</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RunningTimeMax">RunningTimeMax</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RunningTimeMin">RunningTimeMin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Tile">Tile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ZoomLevel">ZoomLevel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-router">router</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-history">history</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-store">store</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Data</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RouteByID">RouteByID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TrunkByID">TrunkByID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-corridorInfo">corridorInfo</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/App.js~App.html">App</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/NotFound.js~NotFound.html">NotFound</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/Bottom</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/Bottom/Bottom.js~Bottom.html">Bottom</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/Bottom/Common/Slider</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/Bottom/Common/Slider/Slider.js~Slider.html">Slider</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/Bottom/TimeFilter</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/Bottom/TimeFilter/TimeFilter.js~TimeFilter.html">TimeFilter</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/Map/RouteMap</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/Map/RouteMap/RouteMap.js~RouteMap.html">RouteMap</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components/TopleftPanel</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/TopleftPanel/TopleftPanel.js~lefttopPanel.html">lefttopPanel</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">reducers</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-changeMap">changeMap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-clickCorridor">clickCorridor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-saveScenario">saveScenario</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">sagas</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-sagas">sagas</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/components/Bottom/ServiceEditor/ServiceEditor.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import React from &quot;react&quot;;
import s from &quot;./ServiceEditor.css&quot;;
import cloneDeep from &apos;lodash/cloneDeep&apos;

//import configuration file
import {
  RunningTime,
  Headway,
  DwellTime,
  RunningTimeMin,
  RunningTimeMax,
  DwellTimeMin,
  DwellTimeMax,
  HeadwayMin,
  HeadwayMax,
  CorridorInfo,
} from &quot;../../../config&quot;

//import slider component
import Slider from &quot;../Common/Slider/Slider&quot;


//import pictures
import runningPic from &apos;../../../img/runningtime.png&apos;
import dwellPic from &apos;../../../img/dwelltime.png&apos;
import headwayPic from &apos;../../../img/frequency.png&apos;

//bind redux
import {bindActionCreators} from &apos;redux&apos;;
import {connect} from &apos;react-redux&apos;;
import * as actionCreators from &apos;../../../reducers/action&apos;;


class ServiceEditor extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      isOpen: true,
      resetAdjust: {},
      currentAdjust: {},
    };

    this.handlePlaceHolder = this.handlePlaceHolder.bind(this);
    this.handleSaveButton = this.handleSaveButton.bind(this);
    this.changeFeature = this.changeFeature.bind(this);


  }

  componentWillMount() {
    let model = {};
    Object.keys(CorridorInfo).map(
      (id)=&gt; {
        model[id] = {
          &quot;runningTime&quot;: 0,
          &quot;dwellTime&quot;: 0,
          &quot;headway&quot;: 0,
        }
      }
    );
    this.setState({
      &quot;resetAdjust&quot;: model,
      &quot;currentAdjust&quot;: model,
    })


  }


  handlePlaceHolder() {
    this.setState({
      isOpen: !this.state.isOpen
    })
  }


  handleSaveButton() {
    this.props.saveScenario(this.state.currentAdjust)

  }


  changeFeature(feature, value) {
    let temp = cloneDeep(this.state.currentAdjust);
    temp[this.props.currentCorridor][feature] = value;
    this.setState({
      currentAdjust: temp,
    })
  }


  render() {
    return (
      &lt;div className=&quot;colBody&quot; id=&quot;service-tab&quot;&gt;
        &lt;div className=&quot;colHead&quot; onClick={
          () =&gt; {
            this.handlePlaceHolder();
            this.props.changeMap(!this.props.currentMap);
          }}&gt;
          &lt;i className=&quot;fa fa-pencil-square-o&quot;/&gt;
          Service Editor
        &lt;/div&gt;


        { this.state.isOpen ?
          &lt;div className=&quot;placeHolder&quot; onClick={
            () =&gt; {
              this.handlePlaceHolder();
              this.props.changeMap(!this.props.currentMap);
            }}&gt;
            &lt;div className=&quot;bigText&quot;&gt;
              &lt;i className=&quot;fa fa-pencil-square-o&quot;/&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          :
          null
        }

        &lt;div className=&quot;btn-group btn-group-justified&quot;&gt;
          &lt;div className=&quot;btn&quot;&gt;
            {/*style=&quot;width:300px; color:{{variants[tabnav].color}}; background-color:{{variants[tabnav].color}}&quot;*/}
            &lt;i className=&quot;fa fa-level-down &quot;/&gt;
          &lt;/div&gt;

          &lt;div className=&quot;btn btn-info&quot; style={{width: 150, position: &quot;absolute&quot;, right: 0}}
               onClick={this.handleSaveButton}&gt;
            &lt;i className=&quot;fa fa-save&quot;/&gt; Save
          &lt;/div&gt;
        &lt;/div&gt;


        &lt;div&gt;

          &lt;div className=&quot;setTimesTitle&quot; style={RunningTime ? null : {display: &quot;none&quot;}}&gt;
            &lt;div className=&quot;subHead&quot;&gt;
              Running time change (segment only)
            &lt;/div&gt;
            &lt;div&gt;
              &lt;div style={{marginTop: -2}}&gt;

                &lt;div style={{width: 60, display: &quot;inline-block&quot;}}&gt;
                  &lt;img src={runningPic} style={{height: 35}}/&gt;
                &lt;/div&gt;
                &lt;i className=&quot;fa fa-arrow-down&quot; style={{color: &quot;black&quot;}}/&gt;

                &lt;div style={{width: &quot;75%&quot;, display: &quot;inline-block&quot;, marginTop: 2}}&gt;
                  &lt;Slider name=&quot;runningTime&quot; min={RunningTimeMin} max={RunningTimeMax} value={this.state.currentAdjust[this.props.currentCorridor][&quot;runningTime&quot;]} step={5}
                          className=&quot;right&quot; changeFunction={this.changeFeature}  /&gt;


                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;

        &lt;/div&gt;

        &lt;div style={DwellTime ? {marginTop: 1} : {display: &quot;none&quot;}}&gt;

          &lt;div className=&quot;setTimesTitle&quot;&gt;

            &lt;div className=&quot;subHead&quot;&gt;
              Dwell time change (all stops for all corridor routes)
            &lt;/div&gt;

            &lt;div&gt;
              &lt;div style={{paddingTop: 1}}&gt;
                &lt;div style={{width: 60, display: &quot;inline-block&quot;}}&gt;
                  &lt;img src={dwellPic} style={{height: 30}}/&gt;
                &lt;/div&gt;
                &lt;i className=&quot;fa fa-arrow-down&quot; style={{color: &quot;black&quot;}}/&gt;

                &lt;div style={{width: &quot;75%&quot;, display: &quot;inline-block&quot;, marginTop: 2}}&gt;
                  &lt;Slider name=&quot;dwellTime&quot; min={DwellTimeMin} max={DwellTimeMax} value={this.state.currentAdjust[this.props.currentCorridor][&quot;dwellTime&quot;]}  step=&quot;5&quot; className=&quot;right&quot; changeFunction={this.changeFeature}/&gt;

                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;


          &lt;/div&gt;

        &lt;/div&gt;

        &lt;div style={Headway ? {marginTop: 1} : {display: &quot;none&quot;}}&gt;

          &lt;div className=&quot;setTimesTitle&quot;&gt;

            &lt;div className=&quot;subHead&quot;&gt;
              Headway change (all corridor routes)
            &lt;/div&gt;

            &lt;div&gt;
              &lt;div style={{paddingTop: 1}}&gt;
                &lt;div style={{width: 60, display: &quot;inline-block&quot;}}&gt;
                  &lt;img src={headwayPic} style={{height: 35}}/&gt;
                &lt;/div&gt;
                &lt;i className=&quot;fa fa-arrow-down&quot; style={{color: &quot;black&quot;}}/&gt;

                &lt;div style={{width: &quot;75%&quot;, display: &quot;inline-block&quot;, marginTop: 2}}&gt;
                  &lt;Slider name=&quot;headway&quot; min={HeadwayMin} max={HeadwayMax} value={this.state.currentAdjust[this.props.currentCorridor][&quot;headway&quot;]}  step=&quot;5&quot; className=&quot;right&quot; changeFunction={this.changeFeature}/&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;


          &lt;/div&gt;

        &lt;/div&gt;
      &lt;/div&gt;





    );
  }
}


function mapStateToProps(state) {
  return {
    currentCorridor: state.reducer.currentCor,
    currentMap: state.reducer.currentMap,
  }
}

function mapDispachToProps(dispatch) {
  return bindActionCreators(actionCreators, dispatch);
}


export default connect(mapStateToProps, mapDispachToProps)(ServiceEditor);


</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
